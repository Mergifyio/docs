---
title: Parallel Checks
description: Accelerates the merging process by testing the compatibility of multiple queued pull requests in parallel.
---

import { Image } from "astro:assets"
import specChecksListScreenshot from "../../images/merge-queue/parallel-checks/spec-checks-list.png"

Parallel Checks let Mergify test multiple queued pull requests together so you
ship faster. Mergify creates temporary draft PRs that represent cumulative
merges (PR#1), (PR#1+PR#2), (PR#1+PR#2+PR#3), runs CI on them in parallel, then
merges the original PRs once checks pass.

## How Parallel Checks Work

Mergify groups PRs by their position in the queue and the `max_parallel_checks`
value. It creates draft PRs that speculatively combine changes and runs your CI
on each in parallel. For example, with PR #1–#5 and `max_parallel_checks: 3`,
Mergify creates:

- Draft #1: PR #1
- Draft #2: PR #1 + PR #2
- Draft #3: PR #1 + PR #2 + PR #3

```dot class="graph"
strict digraph g {
  rankdir=LR;
  fontname="sans-serif";
  fontsize=10;
  nodesep=0.4;
  ranksep=0.6;

  // Default styles
  node [shape=box, style="rounded,filled", fillcolor="#6B7280", fontcolor=white, fontname="sans-serif", margin="0.2,0.1"]
  edge [color="#374151", arrowsize=0.6, penwidth=1.2, fontname="sans-serif"];

  subgraph cluster_mergequeue {
    label = "Merge Queue";
    style="rounded,filled";
    fillcolor="#1CB893";
    color="#00000";
    fontcolor="#000000";
    fontsize=10;

    subgraph cluster_specmerge {
      label="Currently tested (in parallel)";
      // Add a bit of padding around labels inside draft nodes
      node [];
      style="rounded";
      color="#000";
      fontcolor="#000";
      pr1 [label="PR #1", fillcolor="#347D39"]
      pr2 [label="PR #2", fillcolor="#347D39"]
      pr3 [label="PR #3", fillcolor="#347D39"]
      pr1 -> pr2;
      pr2 -> pr3;
    }

    pr4 [label="PR #4", fillcolor="#347D39"]
    pr5 [label="PR #5", fillcolor="#347D39"]
    pr3 -> pr4;
    pr4 -> pr5;
  }

  subgraph cluster_specchecks {
    label = "Currently Tested\n(in Parallel)";
    labelloc="t";
    labeljust="c";
    style="rounded,filled";
    fillcolor="#374151";
    color="#1CB893";
    fontcolor="black";
    fontsize=11;

    traincar1 [label="Draft #1\nPR #1", fontcolor=black, fillcolor="grey"]
    traincar2 [label="Draft #2\nPR #1 + #2", fontcolor=black, fillcolor="grey"]
    traincar3 [label="Draft #3\nPR #1 + #2 + #3", fontcolor=black, fillcolor="grey"]
  }

  // Map queue to drafts
  pr1 -> traincar1 [color="#374151"];
  pr2 -> traincar2 [color="#374151"];
  pr3 -> traincar3 [color="#374151"];

  // CI
  ci [label="Continuous\nIntegration", shape=box, style="rounded,filled", fillcolor="#111827", fontcolor=white]
  traincar1 -> ci [style=dashed, color="#9CA3AF"];
  traincar2 -> ci [style=dashed, color="#9CA3AF"];
  traincar3 -> ci [style=dashed, color="#9CA3AF"];

  { rank=same; traincar1; traincar2; traincar3; }
}

```

This validates the combined outcome ahead of time against your `queue_rules`.
If a draft fails, Mergify removes the culprit PR from the queue and continues
with the rest.

<Image src={specChecksListScreenshot} alt="Mergify parallel checks" />

The result: fewer head‑of‑line stalls, faster merges, and earlier detection of
incompatibilities.

:::note
  Mergify merges the original PRs, not the temporary drafts. If you prefer
  merging the draft PRs instead, see [Merging the Draft
  PRs](/merge-queue/batches#merging-the-draft-prs).
:::

## Configuring Parallel Checks

Set `merge_queue.max_parallel_checks` to control how many speculative checks run at once:

```yaml
merge_queue:
  max_parallel_checks: 3
```
This example runs up to 3 speculative checks simultaneously. Tune this number
to match your CI capacity and typical PR size/complexity.

## When Things Change

Parallel Checks adapt automatically as your code and rules evolve:

- Failed checks: Mergify removes the failing PR and continues with the rest.

- PR or rule changes: affected PRs are re-evaluated and re-embarked in order.

- Base branch updates: checks restart on the new base; configurable via
  `reset_on_external_merge` — see [Lifecycle: Base Branch
  Updates](/merge-queue/lifecycle#base-branch-updates).

## Important Considerations

### Branch Protection Settings

Parallel checks operate by creating temporary pull requests, which merge
multiple PRs with the base branch. This process requires the branch protection
setting `Require branches to be up to date before merging` to be disabled.

This does not mean that Mergify will test outdated PRs, but it will merge the
original pull requests once its parallel checks is finished. The original PR
won't be up-to-date according to GitHub, which means using this setting would
block the merge.

### Tuning parallel checks

Adjust `max_parallel_checks` to balance throughput and CI usage. Higher values
increase concurrency; choose a value your CI can handle reliably. For deeper
guidance and trade‑offs (including batching), see [Merge queue
performance](/merge-queue/performance).
