---
title: Jest Integration with CI Insights
description: Report your test results from Jest tests to CI Insights
---

import jestLogo from "../../images/ci-insights/jest/logo.svg"
import IntegrationLogo from "../../../components/IntegrationLogo.astro"

<IntegrationLogo src={jestLogo} alt="Jest logo"/>

This guide shows how to generate JUnit reports from your Jest tests and upload
them to **CI Insights** using a GitHub Actions workflow.

## 1. Generate a JUnit Report with Jest

Jest has built-in support for JUnit XML reports. You can configure Jest to
output JUnit reports by updating your Jest configuration or using command-line
options.

### Using Jest Configuration

Add the following to your `jest.config.js` or `package.json`:

```javascript
// jest.config.js
module.exports = {
  reporters: [
    'default',
    ['jest-junit', {
      outputDirectory: '.',
      outputName: 'junit.xml'
    }]
  ]
};
```

First, install the `jest-junit` reporter:

```bash
npm install --save-dev jest-junit
```

### Using Command Line Options

```bash
npx jest --reporters=default --reporters=jest-junit
```

You can also set the output file location:

```bash
JEST_JUNIT_OUTPUT_DIR=. JEST_JUNIT_OUTPUT_NAME=junit.xml npx jest --reporters=default --reporters=jest-junit
```

## 2. Update Your GitHub Actions Workflow

:::note
Ensure your CI Insights token (`MERGIFY_TOKEN`) is set up as explained in the [installation
docs](/ci-insights#enabling-ci-insights-for-github).
:::

After generating the JUnit report, add a step to upload the results to CI
Insights using the mergifyio/gha-mergify-ci action.

For example, in your workflow file:

```yaml
- name: Run Jest Tests and Generate JUnit Report
  run: npx jest --reporters=default --reporters=jest-junit

- name: Mergify CI Upload
  if: success() || failure()
  uses: mergifyio/gha-mergify-ci@v6
  with:
    token: ${{ secrets.MERGIFY_TOKEN }}
    report_path: junit.xml
```

If you use a job matrix in your workflow (e.g., to test across multiple
versions), ensure you set the job\_name input (or MERGIFY\_JOB\_NAME
environment variable) so CI Insights can properly distinguish reports for each
matrix job.

For example, with:

```yaml
jobs:
  example_matrix:
    strategy:
      matrix:
        version: [10, 12, 14]
```

Your upload step should look like:

```yaml
- name: Mergify CI Upload
  if: success() || failure()
  uses: mergifyio/gha-mergify-ci@v6
  with:
    token: ${{ secrets.MERGIFY_TOKEN }}
    job_name: example_matrix (${{ matrix.version }})
    report_path: junit.xml
```

:::tip
Setting job\_name helps CI Insights group and display reports correctly for each matrix variation.
:::

## 3. Verify and Review in CI Insights

After pushing these changes:

1. Your GitHub Actions workflow will execute your Jest tests.
2. A JUnit report (junit.xml) is generated.
3. The Mergify CI action uploads the report to CI Insights.

You can then review your test results, including any failures or flaky tests,
directly in the [CI Insights
dashboard](https://dashboard.mergify.com/ci-insights/jobs).

## Troubleshooting Tips

- File Paths: Double-check that the JUnit output file matches the path used in
  `report_path`.

- Permissions: Make sure the `MERGIFY_TOKEN` is valid and setup in your GitHub
  Actions secrets [as explained in the
  docs](\(/ci-insights#enabling-ci-insights-for-github\)).

- Workflow Conditions: If your step is not running, confirm the if condition is
  actually triggered in your job.

- Jest Configuration: Ensure `jest-junit` is properly installed and configured
  in your Jest setup.
