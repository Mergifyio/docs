---
title: JUnit Integration with CI Insights
description: Report your test results from JUnit tests to CI Insights
---

import junitLogo from "../../images/ci-insights/junit/logo.svg"
import IntegrationLogo from "../../../components/IntegrationLogo.astro"

<IntegrationLogo src={junitLogo} alt="JUnit logo"/>

This guide shows how to generate JUnit reports from your JUnit tests and upload
them to **CI Insights** using a GitHub Actions workflow.

## 1. Generate a JUnit Report with JUnit

JUnit naturally generates XML reports that are compatible with the JUnit format
expected by CI Insights. You can configure your build tool to output these
reports.

### Using Maven

Configure the Surefire plugin in your `pom.xml`:

```xml
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>3.0.0-M9</version>
    <configuration>
        <reportsDirectory>${project.build.directory}/surefire-reports</reportsDirectory>
    </configuration>
</plugin>
```

Run tests with:

```bash
mvn test
```

The JUnit XML reports will be generated in `target/surefire-reports/`.

### Using Gradle

Configure the test task in your `build.gradle`:

```gradle
test {
    useJUnitPlatform()
    reports {
        junitXml.enabled = true
        junitXml.destination = file("$buildDir/test-results/test")
    }
}
```

Run tests with:

```bash
./gradlew test
```

The JUnit XML reports will be generated in `build/test-results/test/`.

## 2. Update Your GitHub Actions Workflow

:::note
Ensure your CI Insights token (`MERGIFY_TOKEN`) is set up as explained in the [installation
docs](/ci-insights#enabling-ci-insights-for-github).
:::

After generating the JUnit report, add a step to upload the results to CI
Insights using the mergifyio/gha-mergify-ci action.

For example, in your workflow file:

```yaml
- name: Run JUnit Tests and Generate Report
  run: mvn test

- name: Mergify CI Upload
  if: success() || failure()
  uses: mergifyio/gha-mergify-ci@v6
  with:
    token: ${{ secrets.MERGIFY_TOKEN }}
    report_path: target/surefire-reports/*.xml
```

For Gradle projects:

```yaml
- name: Run JUnit Tests and Generate Report
  run: ./gradlew test

- name: Mergify CI Upload
  if: success() || failure()
  uses: mergifyio/gha-mergify-ci@v6
  with:
    token: ${{ secrets.MERGIFY_TOKEN }}
    report_path: build/test-results/test/*.xml
```

If you use a job matrix in your workflow (e.g., to test across multiple
versions), ensure you set the job\_name input (or MERGIFY\_JOB\_NAME
environment variable) so CI Insights can properly distinguish reports for each
matrix job.

For example, with:

```yaml
jobs:
  example_matrix:
    strategy:
      matrix:
        version: [10, 12, 14]
```

Your upload step should look like:

```yaml
- name: Mergify CI Upload
  if: success() || failure()
  uses: mergifyio/gha-mergify-ci@v6
  with:
    token: ${{ secrets.MERGIFY_TOKEN }}
    job_name: example_matrix (${{ matrix.version }})
    report_path: target/surefire-reports/*.xml
```

:::tip
Setting job\_name helps CI Insights group and display reports correctly for each matrix variation.
:::

## 3. Verify and Review in CI Insights

After pushing these changes:

1. Your GitHub Actions workflow will execute your JUnit tests.
2. JUnit XML reports are generated by Maven/Gradle.
3. The Mergify CI action uploads the reports to CI Insights.

You can then review your test results, including any failures or flaky tests,
directly in the [CI Insights
dashboard](https://dashboard.mergify.com/ci-insights/jobs).

## Troubleshooting Tips

- File Paths: Double-check that the JUnit output files match the path used in
  `report_path`.

- Permissions: Make sure the `MERGIFY_TOKEN` is valid and setup in your GitHub
  Actions secrets [as explained in the
  docs](\(/ci-insights#enabling-ci-insights-for-github\)).

- Workflow Conditions: If your step is not running, confirm the if condition is
  actually triggered in your job.

- Build Tool Configuration: Ensure Maven Surefire or Gradle test reporting is
  properly configured to generate XML reports.
